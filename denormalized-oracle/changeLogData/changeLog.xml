<?xml version="1.0" encoding="UTF-8"?> 
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.2.xsd">

    <preConditions>
          <dbms type="oracle" />
          <runningAs username="WQP_CORE" />
    </preConditions>

    <changeSet author="drsteini" id="loadDataSource" runOnChange="true">
        <delete tableName="data_source"/>
        <loadData encoding="UTF-8"
                  file="denormalized-oracle/changeLogData/data_source.csv"
                  tableName="data_source">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <changeSet author="drsteini" id="loadWqxHrdatToSrid" runOnChange="true">
        <delete tableName="wqx_hrdat_to_srid"/>
        <loadData encoding="UTF-8"
                  file="denormalized-oracle/changeLogData/wqx_hrdat_to_srid.csv"
                  tableName="wqx_hrdat_to_srid">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <changeSet author="drsteini" id="loadWqxSiteTypeConversion" runOnChange="true">
        <delete tableName="wqx_site_type_conversion"/>
        <loadData encoding="UTF-8"
                  file="denormalized-oracle/changeLogData/wqx_site_type_conversion.csv"
                  tableName="wqx_site_type_conversion">
        </loadData>
        <rollback>select 'no rollback - you must restore previous csv and rerun manually' from dual</rollback>
    </changeSet>

    <include file="geospatial_from_dbdw.sql" relativeToChangelogFile="true"/>

</databaseChangeLog>